---
title: "Income-Limits"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Income-Limits}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

### Program Overview

"The Department of Housing and Urban Development (HUD) sets income limits that
determine eligibility for assisted housing programs including the Public
Housing, Section 8 project-based, Section 8 Housing Choice Voucher, Section 202
housing for the elderly, and Section 811 housing for persons with disabilities
programs. HUD develops income limits based on Median Family Income estimates and
Fair Market Rent area definitions for each metropolitan area, parts of some
metropolitan areas, and each non-metropolitan
county("Income Limits | HUD USER")."

### Example

This is a basic examples to show you how to query the Income Limits API. Before
looking at the outputted data I RECOMMEND first taking a look at [Input Arguments][]
as well as [Output Data][] located at the bottom of the page.

DISCLAIMER: The output tables are too large to be displayed here so we choose to
leave them out.

Querying a state will return a data frame with rows representing counties 
within the state. A (state fip + county fip + county subdivision) 10 digit code
will return a 1 row data frame for that county. A CBSA code will also return a 1 
row data frame for that area. 

#### US States
This is an example to show you how to query for all states in the US.
```{r, eval=FALSE}
library(hudr)
hud_states()
```

#### US Counties 
This is an example to show you how to query for all counties in MD,
Virginia, and California, respectively.
```{r, eval=FALSE}
hud_counties("MD")

hud_counties("Virginia")

# If you choose to specify state fips code, you need truncate the 
# extra leading zero from the 2 digit code. For example,
# 06 turns into 6 but...
# 56 just turns in 56. You can supply numeric or character types.
hud_counties("6")
```

#### US Metropolitan Areas
This is an example to show you how to query for all metropolitan areas in US.
```{r, eval=FALSE}
hud_metropolitan()
```

#### State Level Income Limits
This is an example which shows you how to query the Income Limits on
a state level basis. You can use the abbreviation, state name, or fips code. It
will return all counties in the state and their Income Limits.
```{r, eval=FALSE}
# This gets FMR data for the state of Virginia in 2021.
hud_il(query = 'VA', year = '2021')

hud_il(query= "Virginia", year = '2021')

# If you choose to specify state fips code, you need truncate the 
# extra leading zero from the 2 digit code. For example,
# 06 turns into 6 but...
# 56 just turns in 56. You can supply numeric or character types.
hud_fmr(query= "51", year = '2021')
```

#### County Level Income Limits
This is an example which shows you how to query the Income Limits on a
county level basis. These are defined with a 2 digit state code + 3 digit county code.
You also need a 99999 code added onto the end. We currently don't know why the 
extra 99999 is included and have not found any cases where its different. I recommend
taking a look at [US Counties][] to determine what counties are available.
```{r, eval=FALSE}
# Getting a county requires a 2 digit state fip + 3 digit county fip + 99999
hud_il(query = '0100199999', year = '2017')
```

#### Small Areas Income Limits
This is an example which shows you how to query the Small Areas Income Limits.
Small Areas are defined as metropolitan and micropolitan areas which are defined in
CBSA codes. Currently we know how to query for metropolitan, but not sure for 
micropolitan yet. I recommend
taking a look at [US Metropolitan Areas][] to determine what counties are available.
```{r, eval=FALSE}
# Gets FMR data for METRO area.
hud_il(query = "METRO47900M47900", year=c(2018))
```

### Input Arguments

**QUERY**: Can provide either a 10 digit FIPS code which is almost always
  state fips + county fips + 99999, or state abbreviation. 
  Can also provide a CBSA code. This CBSA code requires both itself and its
  corresponding division code. You are only allowed to query for metropolitan areas.
  
  Run hud_states() to get a list of counties
  
  Run hud_metropolitan() to get a list of metropolitan areas.
  
  Run hud_counties("MD") to get list of counties in MD
  
  * query = '5100199999'
  * query = 'MD'
  * query = 'METRO12700M12700'

**YEAR**: Year range of the data to retrieve. Defaults to current year. Make sure 
the years provided follow the rules provided by the TYPE argument.

  * year = c(2019, 2018, 2021)
  * year = c(2016, 2017, 2022)
  * year = c(2021)

**KEY**: The API key.

  * key = "wqokqo2138jdi13wfwwfwcytjyr"

### Output Data

1) **county_name** 
    * Name of the county if it is a county.


2) **counties_msa**
    * Names of all counties belonging to the Metro Area if it is a Metro Area (MSA).


3) **town_name**
    * Town name - applicable for North East regions


4) **metro_status**
    * value will be "1" if it is a metropolitan county. Otherwise value will be "0".


5) **metro_name**
    * Metro area name if metro_status is "1"


6) **year**
    * year of the data


7) **median_income**
    * Median Income for the area
    
    
8) **Very Low** 
    * (50%) Income Limits
    * For more details on il50 check the website.


9) **Extremely Low** 
    * (30%) Income Limits
    * For more details on il30 check the website.
    
    
10) **Low** 
    * (80%) Income Limits
    * For more details on il80 check the website.
    
### References

"Income Limits | HUD USER." Huduser.gov, 2015,
www.huduser.gov/portal/datasets/il.html.
